/**
 * Eco Compiler v1.1.0-pre
 * http://github.com/sstephenson/eco
 *
 * Copyright (c) 2010 Sam Stephenson
 * Released under the MIT License
 */
this.eco=function(k){return function g(f){var b,c={id:f,exports:{}};if(b=k[f]){b(c,g,c.exports);return c.exports}else throw"Cannot find module '"+f+"'";}}({eco:function(k,g){g("coffee-script");k.exports=g("eco/compiler")},"eco/compiler":function(k,g,f){(function(){var b,c,d,e,a,h;b=g("coffee-script");c=g("eco/preprocessor");h=c.preprocess;c=g("eco/util");e=c.indent;f.compile=d=function(i,j){var l,m;m=typeof(l=typeof j==="undefined"||j===null?undefined:j.identifier)!=="undefined"&&l!==null?l:"module.exports";
m.match(/\./)||(m="var "+m);l=b.compile(h(i),{noWrap:true});return""+m+" = function(__obj) {\n  if (!__obj) __obj = {};\n  var __out = [], __capture = function(callback) {\n    var out = __out, result;\n    __out = [];\n    callback.call(this);\n    result = __out.join('');\n    __out = out;\n    return __safe(result);\n  }, __sanitize = function(value) {\n    if (value && value.ecoSafe) {\n      return value;\n    } else if (typeof value !== 'undefined' && value != null) {\n      return __escape(value);\n    } else {\n      return '';\n    }\n  }, __safe, __objSafe = __obj.safe, __escape = __obj.escape;\n  __safe = __obj.safe = function(value) {\n    if (value && value.ecoSafe) {\n      return value;\n    } else {\n      if (!(typeof value !== 'undefined' && value != null)) value = '';\n      var result = new String(value);\n      result.ecoSafe = true;\n      return result;\n    }\n  };\n  if (!__escape) {\n    __escape = __obj.escape = function(value) {\n      return ('' + value)\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;');\n    };\n  }\n  (function() {\n"+
e(l,4)+"\n  }).call(__obj);\n  __obj.safe = __objSafe, __obj.escape = __escape;\n  return __out.join('');\n};"};f.link=a=function(i){(new Function("module",d(i)))(i={});return i.exports};f.render=function(i,j){return a(i)(j)};if(g.extensions)g.extensions[".eco"]=function(i,j){var l;l=g("fs").readFileSync(j,"utf-8");return i._compile(d(l),j)};else g.registerExtension&&g.registerExtension(".eco",d)}).call(this)},"eco/preprocessor":function(k,g,f){(function(){var b,c,d,e=function(a,h){return function(){return a.apply(h,
arguments)}};c=g("eco/scanner").Scanner;d=g("eco/util");f.preprocess=function(a){return(new b(a)).preprocess()};f.Preprocessor=function(){b=function(a){this.scanner=new c(a);this.output="";this.level=0;this.options={};this.captures=[];return this};b.prototype.preprocess=function(){for(;!this.scanner.done;)this.scanner.scan(e(function(a){return this[a[0]].apply(this,a.slice(1))},this));return this.output};b.prototype.record=function(a){this.output+=d.repeat("  ",this.level);return this.output+=a+"\n"};
b.prototype.printString=function(a){return a.length?this.record("__out.push "+d.inspectString(a)):null};b.prototype.beginCode=function(a){return this.options=a};b.prototype.recordCode=function(a){return a!=="end"?this.options.print?this.options.safe?this.record("__out.push "+a):this.record("__out.push __sanitize "+a):this.record(a):null};b.prototype.indent=function(a){this.level++;if(a){this.record("__capture "+a);this.captures.unshift(this.level);return this.indent()}};b.prototype.dedent=function(){this.level--;
this.level<0&&this.fail("unexpected dedent");if(this.captures[0]===this.level){this.captures.shift();return this.dedent()}};b.prototype.fail=function(a){throw"Parse error on line "+this.scanner.lineNo+": "+a;};return b}()}).call(this)},"eco/scanner":function(k,g,f){(function(){var b,c,d,e;d=g("strscan");c=d.StringScanner;d=g("eco/util");e=d.trim;f.scan=function(a){var h;h=[];for(a=new b(a);!a.done;)a.scan(function(i){return h.push(i)});return h};f.Scanner=function(){b=function(a){this.source=a.replace(/\r\n?/g,
"\n");this.scanner=new c(this.source);this.mode="data";this.buffer="";this.lineNo=1;this.done=false;return this};b.modePatterns={data:/(.*?)(<%(([=-])?)|\n|$)/,code:/(.*?)(((:|(->|=>))\s*)?%>|\n|$)/};b.dedentablePattern=/^(end|when|else|catch|finally)(?:\W|$)/;b.prototype.scan=function(a){if(this.done)return a();else if(this.scanner.hasTerminated()){this.done=true;switch(this.mode){case "data":return a(["printString",this.flush()]);case "code":return a(["fail","unexpected end of template"])}}else{this.advance();
switch(this.mode){case "data":return this.scanData(a);case "code":return this.scanCode(a)}}};b.prototype.advance=function(){this.scanner.scanUntil(b.modePatterns[this.mode]);this.buffer+=this.scanner.getCapture(0);this.tail=this.scanner.getCapture(1);this.directive=this.scanner.getCapture(3);return this.arrow=this.scanner.getCapture(4)};b.prototype.scanData=function(a){var h;if(this.tail==="\n"){this.buffer+=this.tail;this.lineNo++;return this.scan(a)}else if(this.tail){this.mode="code";a(["printString",
this.flush()]);return a(["beginCode",{print:typeof(h=this.directive)!=="undefined"&&h!==null,safe:this.directive==="-"}])}};b.prototype.scanCode=function(a){var h;if(this.tail==="\n")return a(["fail","unexpected newline in code block"]);else if(this.tail){this.mode="data";h=e(this.flush());if(this.arrow)h+=" "+this.arrow;this.isDedentable(h)&&a(["dedent"]);a(["recordCode",h]);if(this.directive)return a(["indent",this.arrow])}};b.prototype.flush=function(){var a;a=this.buffer;this.buffer="";return a};
b.prototype.isDedentable=function(a){return a.match(b.dedentablePattern)};return b}.call(this)}).call(this)},"eco/util":function(k,g,f){(function(){var b,c;f.repeat=b=function(d,e){return Array(e+1).join(d)};f.indent=function(d,e){var a,h,i,j,l,m;m=b(" ",e);j=[];i=d.split("\n");a=0;for(h=i.length;a<h;a++){l=i[a];j.push(m+l)}return j.join("\n")};f.trim=function(d){return d.replace(/^\s+/,"").replace(/\s+$/,"")};c={"\\":"\\\\","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};f.inspectString=
function(d){return"'"+d.replace(/[\x00-\x1f\\]/g,function(e){if(e in c)return c[e];else{e=e.charCodeAt(0).toString(16);if(e.length===1)e="0"+e;return"\\u00"+e}}).replace(/'/g,"\\'")+"'"}}).call(this)},strscan:function(k,g,f){(function(){var b;(typeof f!=="undefined"&&f!==null?f:this).StringScanner=function(){b=function(c){this.source=c.toString();this.reset();return this};b.prototype.scan=function(c){var d;return(d=c.exec(this.getRemainder()))&&d.index===0?this.setState(d,{head:this.head+d[0].length,
last:this.head}):this.setState([])};b.prototype.scanUntil=function(c){if(c=c.exec(this.getRemainder())){this.setState(c,{head:this.head+c.index+c[0].length,last:this.head});return this.source.slice(this.last,this.head)}else return this.setState([])};b.prototype.scanChar=function(){return this.scan(/./)};b.prototype.skip=function(c){if(this.scan(c))return this.match.length};b.prototype.skipUntil=function(c){if(this.scanUntil(c))return this.head-this.last};b.prototype.check=function(c){var d;return(d=
c.exec(this.getRemainder()))&&d.index===0?this.setState(d):this.setState([])};b.prototype.checkUntil=function(c){if(c=c.exec(this.getRemainder())){this.setState(c);return this.source.slice(this.head,this.head+c.index+c[0].length)}else return this.setState([])};b.prototype.peek=function(c){return this.source.substr(this.head,typeof c!=="undefined"&&c!==null?c:1)};b.prototype.getSource=function(){return this.source};b.prototype.getRemainder=function(){return this.source.slice(this.head)};b.prototype.getPosition=
function(){return this.head};b.prototype.hasTerminated=function(){return this.head===this.source.length};b.prototype.getPreMatch=function(){if(this.match)return this.source.slice(0,this.head-this.match.length)};b.prototype.getMatch=function(){return this.match};b.prototype.getPostMatch=function(){if(this.match)return this.source.slice(this.head)};b.prototype.getCapture=function(c){return this.captures[c]};b.prototype.reset=function(){return this.setState([],{head:0,last:0})};b.prototype.terminate=
function(){return this.setState([],{head:this.source.length,last:this.head})};b.prototype.concat=function(c){return this.source+=c};b.prototype.unscan=function(){if(this.match)return this.setState([],{head:this.last,last:0});else throw"nothing to unscan";};b.prototype.setState=function(c,d){var e,a;this.head=typeof(e=typeof d==="undefined"||d===null?undefined:d.head)!=="undefined"&&e!==null?e:this.head;this.last=typeof(a=typeof d==="undefined"||d===null?undefined:d.last)!=="undefined"&&a!==null?a:
this.last;this.captures=c.slice(1);return this.match=c[0]};return b}()})()},"coffee-script":function(k){if(typeof CoffeeScript!=="undefined"&&CoffeeScript!=null)k.exports=CoffeeScript;else throw"Cannot require '"+k.id+"': CoffeeScript not found";}})("eco");
